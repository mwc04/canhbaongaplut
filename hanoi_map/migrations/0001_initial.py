# Generated by Django 6.0 on 2025-12-13 17:31

import django.contrib.gis.db.models.fields
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='FloodPrediction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('location', django.contrib.gis.db.models.fields.PointField(srid=4326, verbose_name='V·ªã tr√≠')),
                ('address', models.CharField(max_length=300, verbose_name='ƒê·ªãa ch·ªâ')),
                ('district', models.CharField(max_length=100, verbose_name='Qu·∫≠n')),
                ('prediction_time', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Th·ªùi ƒëi·ªÉm d·ª± ƒëo√°n')),
                ('risk_level', models.CharField(choices=[('very_low', 'R·∫•t th·∫•p'), ('low', 'Th·∫•p'), ('medium', 'Trung b√¨nh'), ('high', 'Cao'), ('very_high', 'R·∫•t cao')], max_length=20, verbose_name='M·ª©c ƒë·ªô nguy c∆°')),
                ('predicted_depth_cm', models.FloatField(default=0, verbose_name='ƒê·ªô s√¢u d·ª± ƒëo√°n (cm)')),
                ('confidence', models.FloatField(validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='ƒê·ªô tin c·∫≠y (%)')),
                ('rainfall_mm', models.FloatField(verbose_name='L∆∞·ª£ng m∆∞a (mm/h)')),
                ('elevation', models.FloatField(help_text='So v·ªõi m·ª±c n∆∞·ªõc bi·ªÉn', verbose_name='ƒê·ªô cao (m)')),
                ('distance_to_river', models.FloatField(default=1000, verbose_name='Kho·∫£ng c√°ch ƒë·∫øn s√¥ng (m)')),
                ('drainage_capacity', models.CharField(choices=[('good', 'T·ªët'), ('average', 'Trung b√¨nh'), ('poor', 'K√©m')], max_length=50, verbose_name='Kh·∫£ nƒÉng tho√°t n∆∞·ªõc')),
                ('reasons', models.JSONField(default=list, verbose_name='Nguy√™n nh√¢n d·ª± ƒëo√°n')),
                ('recommendations', models.TextField(blank=True, verbose_name='Khuy·∫øn ngh·ªã')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'D·ª± ƒëo√°n ng·∫≠p',
                'verbose_name_plural': 'D·ª± ƒëo√°n ng·∫≠p',
                'ordering': ['-prediction_time'],
            },
        ),
        migrations.CreateModel(
            name='WeatherForecast',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('location', django.contrib.gis.db.models.fields.PointField(srid=4326, verbose_name='V·ªã tr√≠')),
                ('location_name', models.CharField(default='H√† N·ªôi', max_length=200, verbose_name='T√™n khu v·ª±c')),
                ('current_temp', models.FloatField(verbose_name='Nhi·ªát ƒë·ªô hi·ªán t·∫°i (¬∞C)')),
                ('current_humidity', models.FloatField(verbose_name='ƒê·ªô ·∫©m hi·ªán t·∫°i (%)')),
                ('current_rainfall', models.FloatField(default=0, verbose_name='L∆∞·ª£ng m∆∞a hi·ªán t·∫°i (mm/h)')),
                ('current_description', models.CharField(max_length=100, verbose_name='M√¥ t·∫£')),
                ('current_icon', models.CharField(max_length=10, verbose_name='Icon th·ªùi ti·∫øt')),
                ('forecast_3h', models.JSONField(default=dict, verbose_name='D·ª± b√°o 3h')),
                ('forecast_24h', models.JSONField(default=dict, verbose_name='D·ª± b√°o 24h')),
                ('alerts', models.JSONField(blank=True, default=list, verbose_name='C·∫£nh b√°o')),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('valid_until', models.DateTimeField(verbose_name='Hi·ªáu l·ª±c ƒë·∫øn')),
            ],
            options={
                'verbose_name': 'D·ª± b√°o th·ªùi ti·∫øt',
                'verbose_name_plural': 'D·ª± b√°o th·ªùi ti·∫øt',
            },
        ),
        migrations.CreateModel(
            name='FloodZone',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='T√™n ƒëi·ªÉm ng·∫≠p')),
                ('zone_type', models.CharField(choices=[('black', 'ƒêi·ªÉm ƒëen ng·∫≠p l·ª•t'), ('frequent', 'Th∆∞·ªùng xuy√™n ng·∫≠p'), ('seasonal', 'Ng·∫≠p theo m√πa'), ('rain', 'Ng·∫≠p khi m∆∞a l·ªõn'), ('tide', 'Ng·∫≠p tri·ªÅu c∆∞·ªùng')], max_length=20, verbose_name='Lo·∫°i ng·∫≠p')),
                ('geometry', django.contrib.gis.db.models.fields.PolygonField(srid=4326, verbose_name='Khu v·ª±c ng·∫≠p')),
                ('district', models.CharField(max_length=100, verbose_name='Qu·∫≠n')),
                ('ward', models.CharField(blank=True, max_length=100, verbose_name='Ph∆∞·ªùng')),
                ('street', models.CharField(blank=True, max_length=200, verbose_name='T√™n ƒë∆∞·ªùng/ph·ªë')),
                ('max_depth_cm', models.FloatField(default=50, verbose_name='ƒê·ªô s√¢u t·ªëi ƒëa (cm)')),
                ('avg_duration_hours', models.FloatField(default=3, verbose_name='Th·ªùi gian ng·∫≠p trung b√¨nh (gi·ªù)')),
                ('flood_cause', models.CharField(default='H·ªá th·ªëng tho√°t n∆∞·ªõc qu√° t·∫£i', max_length=100, verbose_name='Nguy√™n nh√¢n ng·∫≠p')),
                ('is_active', models.BooleanField(default=True, verbose_name='ƒêang c√≥ nguy c∆°')),
                ('last_flood_date', models.DateField(blank=True, null=True, verbose_name='Ng√†y ng·∫≠p g·∫ßn nh·∫•t')),
                ('last_reported_at', models.DateTimeField(blank=True, null=True, verbose_name='B√°o c√°o g·∫ßn nh·∫•t')),
                ('report_count', models.IntegerField(default=0, verbose_name='S·ªë b√°o c√°o')),
                ('description', models.TextField(blank=True, verbose_name='M√¥ t·∫£ chi ti·∫øt')),
                ('solution', models.TextField(blank=True, verbose_name='Bi·ªán ph√°p x·ª≠ l√Ω')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'ƒêi·ªÉm ng·∫≠p',
                'verbose_name_plural': 'C√°c ƒëi·ªÉm ng·∫≠p',
                'indexes': [models.Index(fields=['is_active'], name='hanoi_map_f_is_acti_04fdc3_idx'), models.Index(fields=['district'], name='hanoi_map_f_distric_9603e4_idx')],
            },
        ),
        migrations.CreateModel(
            name='FloodReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('location', django.contrib.gis.db.models.fields.PointField(srid=4326, verbose_name='V·ªã tr√≠ b√°o c√°o')),
                ('address', models.TextField(verbose_name='ƒê·ªãa ch·ªâ chi ti·∫øt')),
                ('district', models.CharField(max_length=100, verbose_name='Qu·∫≠n/Huy·ªán')),
                ('ward', models.CharField(blank=True, max_length=100, verbose_name='Ph∆∞·ªùng/X√£')),
                ('street', models.CharField(blank=True, max_length=200, verbose_name='T√™n ƒë∆∞·ªùng')),
                ('water_depth', models.FloatField(verbose_name='ƒê·ªô s√¢u n∆∞·ªõc (cm)')),
                ('severity', models.CharField(choices=[('light', 'Nh·∫π (d∆∞·ªõi 20cm)'), ('medium', 'Trung b√¨nh (20-40cm)'), ('heavy', 'N·∫∑ng (40-70cm)'), ('severe', 'R·∫•t n·∫∑ng (tr√™n 70cm)')], max_length=20, verbose_name='M·ª©c ƒë·ªô')),
                ('area_size', models.CharField(help_text='VD: 10m, c·∫£ m·∫∑t ƒë∆∞·ªùng, 1 l√†n ƒë∆∞·ªùng...', max_length=50, verbose_name='Di·ªán t√≠ch ng·∫≠p')),
                ('description', models.TextField(blank=True, verbose_name='M√¥ t·∫£ t√¨nh h√¨nh')),
                ('photo_url', models.URLField(blank=True, verbose_name='Link ·∫£nh')),
                ('video_url', models.URLField(blank=True, verbose_name='Link video')),
                ('reporter_name', models.CharField(blank=True, max_length=100, verbose_name='T√™n ng∆∞·ªùi b√°o')),
                ('reporter_phone', models.CharField(blank=True, max_length=20, verbose_name='S·ªë ƒëi·ªán tho·∫°i')),
                ('reporter_email', models.EmailField(blank=True, max_length=254, verbose_name='Email')),
                ('status', models.CharField(choices=[('pending', '‚è≥ Ch·ªù x√°c nh·∫≠n'), ('verified', '‚úÖ ƒê√£ x√°c nh·∫≠n'), ('false', '‚ùå Sai th√¥ng tin'), ('resolved', 'üèÅ ƒê√£ x·ª≠ l√Ω')], default='pending', max_length=20)),
                ('verification_notes', models.TextField(blank=True, verbose_name='Ghi ch√∫ x√°c nh·∫≠n')),
                ('verified_at', models.DateTimeField(blank=True, null=True, verbose_name='Th·ªùi ƒëi·ªÉm x√°c nh·∫≠n')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='X√°c nh·∫≠n b·ªüi')),
                ('flood_zone', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reports', to='hanoi_map.floodzone', verbose_name='Thu·ªôc ƒëi·ªÉm ng·∫≠p')),
            ],
            options={
                'verbose_name': 'B√°o c√°o ng·∫≠p',
                'verbose_name_plural': 'B√°o c√°o ng·∫≠p',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['status', 'created_at'], name='hanoi_map_f_status_0177f0_idx'), models.Index(fields=['district', 'severity'], name='hanoi_map_f_distric_000fe6_idx')],
            },
        ),
    ]
